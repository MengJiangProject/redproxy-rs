[package]
name = "redproxy-rs"
version = "0.1.0"
authors = ["Bearice Ren <bearice@icybear.net>"]
edition = "2018"
default-run = "redproxy-rs"

[[bin]]
name = "redproxy-rs"
path = "src/main.rs"

[[bin]]
name = "milu-repl"
path = "src/milu/repl.rs"
required-features = ["milu-repl"]

[features]
milu-repl = ["rustyline","rustyline-derive"]

[dependencies]
tokio = { version = "1.9.0", features = ["full"] }
nix = { version = "0.22.0"}
async-trait = "0.1.51"
easy-error = "1.0.0"
log = "0.4"
env_logger = "0.9.0"
yaml-rust = "0.4"
serde = { version = "1.0", features = ["derive"] }
serde_yaml = "0.8"
# rustls = "0.19"
tokio-rustls = "0.22.0"
nom = "6.2.1"
# nom_locate = "3.0.2"
regex = "1"
dyn-clone = "1"
clap = "~2.33"

rustyline = { version = "9.0.0", optional = true }
rustyline-derive = { version ="0.5.0",optional = true }

[dev-dependencies]
tokio-test = "0.4.2"
test-env-log = "0.2.7"